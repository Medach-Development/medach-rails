= semantic_form_for [:admin, @ad_banner], :html => { :multipart => true }, builder: ActiveAdmin::FormBuilder do |f|
  = f.inputs 'Содержимое' do
    = f.input :ad_position
    = f.input :ad_type, input_html: { data: { if: 'changed', action: 'callback on_change_ad_type' }, class: 'ad_type_select' }

    = f.input :google_id, wrapper_html: { style: f.object.ad_type == 'google' ? '' : 'display: none', class: 'content_google' }
    = f.input :link, wrapper_html: { style: f.object.ad_type == 'custom' ? '' : 'display: none', class: 'content_custom' }
    - hint = f.object.image.present? ? image_tag(f.object.image.url) : content_tag(:span, 'Изображение не представлено')
    = f.input :image, as: :file, hint: hint, wrapper_html: { style: f.object.ad_type == 'custom' ? '' : 'display: none', class: 'content_custom' }

  = f.inputs 'Статьи' do
    = f.input :article_type, as: :select, collection: Article::TYPES.map { |a_type| [I18n.t("activerecord.models.#{a_type.underscore}.many"), a_type] }, input_html: { data: { if: 'changed', action: 'callback on_change_article_type' }, class: 'article_type_select' }

    = content_tag :div, nil, class: 'selected_values', data: { selected_values: f.object.ad_banners_articles.where(automaticly_created: false).pluck(:article_id) }
    - Article::TYPES.each do |a_type|
      = f.input :article_ids, as: :select, collection: a_type.constantize.all, input_html: { multiple: true }, wrapper_html: { style: f.object.article_type == a_type ? '' : 'display: none', class: "a_type article_#{a_type}" }
    
  = f.actions do
    = f.action :submit
    = f.action :cancel, class: :cancel, label: 'Отменить', :wrapper_html => { class: :cancel}
